---
sidebar_position: 2
title: Migrating to v1.0
hide_table_of_contents: false
---

## Version 1.0

La version 1.0 de publicodes est une version majeure qui apporte des changements importants dans la syntaxe des règles.
Voir le [changelog](https://github.com/publicodes/publicodes/blob/master/CHANGELOG.md) pour plus de détails.

## Migration vers la version 1.0

Vous pouvez utiliser le package `@publicodes/codemod` pour migrer vos règles vers la nouvelle syntaxe de la version 1.0.

Ce codemod effectue les modifications suivantes :

- Supprime les mécanismes `nom` pour les remplacer par `avec`
- Transforme les `composantes` en `somme`
- Transforme les `unités` et retire les espaces entre la barre oblique
- Supprime le mot clé inutile `avec` dans `inversion numérique`
- Remplace `recalcul` par `contexte`
- Uniformisation des saut de lignes dans la déclaration de règles avec `avec`
- Simplifie l'écriture lorsque la clé `valeur` est utilisée sans autre mécanisme chainé

### Utilisation

### Usage

```bash npm2yarn
npx @publicodes/codemod <path>
```

`path` is the path to the folder containing the `yaml` files of the rules you want to migrate.

### Limites

1. Vous devriez mettre à jour manuellement la version des packages publicodes dans `package.json`.

2. Ce codemod ne mettra pas à jour la syntaxe exotique des variations (très peu utilisée). Si vous l'utilisez, vous devriez mettre à jour la syntaxe manuellement **avant** d'exécuter le codemod.

3. Les remplacements sont appliqués avec un ordre de priorité différent, ce qui peut aboutir a des évaluations différente pour une même situation. Si vous utilisez des remplacements, faites tourner vos tests pour vérifier que les résultats sont toujours les mêmes après la migration.

4. Vous devrez mettre à jour manuellement les appels à `evaluate` contenant une expression publicodes dont la syntaxe a changé (par exemple `unité`).
